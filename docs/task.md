Ты — автономный AI Software Engineer + Tech Lead + QA для разработки браузерной игры под платформу CrazyGames.
Твоя цель — максимально самостоятельно спроектировать и реализовать игру:

Название: “LumeLines: Daily Blocks”
Слоган: “Place. Clear. Glow — every day.”

И подготовить игру к загрузке на CrazyGames.
Если ты не можешь сделать часть работы (например, из-за отсутствия доступа к аккаунту/инструментам), ты ОБЯЗАН написать максимально подробные пошаговые инструкции, что нужно сделать вручную, с примерами команд/файлов/кода.

0) Критические ограничения (не нарушать):
- Максимальная простота реализации (1 разработчик, короткий продакшн).
- Полностью офлайн: НИКАКИХ серверов/бекенда. Только локальные сохранения и SDK/аналитика по желанию.
- Минимальная поддержка: без регулярного контента/ивентов/баланса.
- Минимальные расходы на продвижение: ставка на органику (платформенный трафик/SEO/витрины).
- Монетизация: только IAA через CrazyGames SDK (midgame + rewarded). Без сторонних сетей.
- Игра обязана быть полностью играбельной, даже если реклама не доступна (adblock/unfilled/error).

1) Платформа/SDK требования (обязательно):
Используй CrazyGames SDK:
- loadingStart / loadingStop
- gameplayStart / gameplayStop при входе/выходе из реального геймплея
- requestAd("midgame"|"rewarded") с корректными callbacks (pause/mute/resume + выдача reward строго после adFinished)
- hasAdblock() (игру не блокировать; можно показать мягкое сообщение)
- happytime() на “супер-комбо” или новый рекорд (редко)

Сохранения:
- Используй CrazyGames Data module если доступен; обеспечь fallback в localStorage.
- Ключи: bestScore, themesUnlocked, dailyBest_YYYYMMDD, rewardCooldownUntil, runsCount, settings (audio, etc)

2) Технический стек (выбери сам и обоснуй):
- Предпочтительно: TypeScript + Vite.
- Рендер: Phaser 3 ИЛИ PixiJS ИЛИ чистый Canvas2D — выбери, что проще/быстрее для 1 человека.
- Обязательное: модульная архитектура, тестируемая game-логика отдельно от UI.
- Тесты: Vitest/Jest для core logic. (Опционально Playwright для smoke-test в браузере.)
- Логи: структурированные (INFO/WARN/ERROR), плюс dev-режим с подробным логом.

3) Игровой дизайн (фиксированный; реализовать как есть):
3.1 High concept
“LumeLines: Daily Blocks” — классический wood/block puzzle:
поле 10×10, игрок размещает фигуры, очищает линии, набирает очки, работает комбо-множитель.
Есть режим Play и Daily Challenge (seed дня), косметические темы за токены.

Важно: визуальная идентичность “Lume” = мягкое свечение (glow) на подсветках линий/комбо.
Это НЕ должно усложнять разработку: можно сделать простыми эффектами (альфа/скейл/частицы).

3.2 Экраны (минимум):
- Boot/Loading
- Main Menu: Play, Daily, Themes, Settings (в меню показывать название + слоган)
- Gameplay: поле, 3 фигуры, Pause
- Pause: Resume, Restart, Settings
- Results/Game Over: score, best, tokens, CTA Play again, rewarded offers
- Themes: список тем (4 штуки), покупка за токены

3.3 Управление
- Desktop: drag-and-drop мышью
- Mobile: drag-and-drop пальцем + доп. режим “tap-to-place”
  (если проще: по тапу выбираем фигуру, по тапу на поле пытаемся поставить)

4) Economy / Rewards (ТОЧНЫЕ ЧИСЛА — реализовать дословно):
1) Очки за размещение: +5 за каждую поставленную клетку фигуры.
2) Очистка линии: +120 за каждую очищенную линию (ряд/колонка).
3) Бонус мульти-очистки: если за ход очищено L линий, добавить +80*(L-1).
4) Комбо-множитель: старт x1.00; каждый ход с очисткой повышает на +0.25, максимум x2.50.
5) Ход без очистки → комбо сброс в x1.00.
6) Комбо умножает только очки за очистки (п.2–3). Очки размещения (п.1) не умножаются.
7) Tokens по итогам раунда: tokens = max(1, floor(score/1500)).
8) Бонус токенов: +2 за новый bestScore; +3 за первую попытку Daily в день.
9) Цены тем: 20, 35, 50, 70 Tokens (4 темы).
10) Rewarded #1 Continue: доступен 1 раз за раунд, только если score≥800.
    После rewarded заменить 3 фигуры на [1x1, 1x2, 2x2]. Комбо сбросить в x1.00.
11) Rewarded #2 Double Tokens: доступен 1 раз за раунд, только если tokens≥2. После rewarded tokens *= 2.
12) Глобальный кулдаун rewarded-запросов: 90 секунд между любыми requestAd("rewarded") (успех/ошибка).
13) Доп. кулдаун Continue: 10 минут после использования Continue (между раундами), хранить rewardCooldownUntil.
14) AdError/adblock: reward не выдавать; показать “Ad unavailable” на 2 секунды; игра продолжается.

5) Генерация фигур и анти-фрустрация (простые правила):
- Набор фигур: 12–18 базовых.
- Генерация должна избегать “тупиков” на старте:
  - На первых 10 ходах гарантировать, что хотя бы 1 из 3 фигур может быть поставлена.
  - Не выдавать 3 “крупные” фигуры подряд (сам определишь критерий крупности).
- Daily Challenge:
  - seed = дата (YYYYMMDD) + фиксированный salt (“lumelines_v1”).
  - В Daily генератор должен быть детерминированным.

6) Монетизация (логика показа):
- Midgame: вызывать только на Results (после раунда) или при переключении режимов. Не в геймплее.
- Rewarded: только по кнопке игрока (Continue / Double Tokens). Никогда автоматически.
- SDK сам может ограничивать частоту midgame — это нормально; корректно обрабатывай, если ad не показан.

7) “Органика/SEO” (минимум без бюджета):
Подготовь метаданные (title/description/tags) под CrazyGames:
- Title: "LumeLines: Daily Blocks"
- Short tagline в UI и описании: "Place. Clear. Glow — every day."
- Description (примерный каркас, сделай свой, но в 1–2 абзаца):
  1) Что это: relaxing block puzzle + lines + combos
  2) Крючок: daily challenge (seeded) + unlock glow themes
- Tags: block, puzzle, daily, relaxing, casual, grid, lines
Подготовь 6–8 скриншотов (можно placeholder) и структуру для промо-изображений.

8) Качество, документация и процесс (обязательно):
8.1 Репозиторий
- Структура проекта, ESLint/Prettier, строгий TS.
- Скрипты: dev, build, test, lint.
- README:
  - Как запустить локально
  - Как собрать билд для CrazyGames (папка dist)
  - Как включить/выключить SDK mock (VITE_USE_CRAZYGAMES_MOCK)
  - Список файлов для загрузки на CrazyGames
- ADR (Architecture Decision Record) на 1 страницу: почему выбран движок/архитектура.
- CHANGELOG: краткие изменения по версиям.

8.2 Логи
- Логируй ключевые события (не спам):
  - startSession(mode, date), startRun(mode, seed), endRun(score, lines, duration)
  - adRequested(type), adStarted, adFinished, adError
  - rewardedUsed(kind), rewardedDenied(reason)
  - purchaseTheme(themeId)
- В dev mode: расширенный лог + debug overlay (FPS/seed/комбо/следующий набор фигур).

8.3 Тесты (юнит)
- Покрой тестами core logic:
  - canPlace фигуру на поле
  - applyPlacement + очистка линий
  - подсчёт очков (включая комбо и бонусы)
  - генератор фигур (анти-фрустрация на старте)
  - детерминированность daily seed
  - правила кулдаунов rewarded/continue
- Минимум 20 тестов, каждый с понятным названием.

8.4 QA чеклист
- Создай CHECKLIST.md:
  - Desktop/mобайл управление
  - Работа паузы
  - GameOver → Results
  - Сохранения (перезагрузка страницы)
  - AdError/adblock
  - Midgame не в геймплее
  - Reward выдаётся только после adFinished

9) Deliverables (что ты должен выдать в конце):
- Полный исходный код проекта.
- Сборка dist (или инструкции, как собрать).
- Документация (README, ADR, CHECKLIST, CHANGELOG).
- Список интеграционных точек CrazyGames SDK и где они вызываются (SDK_INTEGRATION.md).
- Если чего-то не можешь сделать автоматически — выдай пошаговые инструкции (команды, файлы, что куда загрузить).

10) План работ (выполни и задокументируй):
- Milestone A: Setup проекта + базовый рендер + сетка + ввод
- Milestone B: core logic (placement, clear, scoring, combo)
- Milestone C: UI (Menu/Gameplay/Results/Themes/Settings)
- Milestone D: Saves (Data module + fallback)
- Milestone E: CrazyGames SDK (loading/gameplay/ads/adblock/happytime)
- Milestone F: Тесты + QA checklist + полировка + build

11) Важное: автономность
- Не задавай вопросов, если можешь принять разумные решения сам.
- Если нужен выбор (движок/подход), выбери и кратко обоснуй в ADR.
- Если блокер (например, отсутствует реальный SDK в локальной среде), сделай mock/stub для dev и подробно опиши,
  как переключить на реальный SDK на CrazyGames.

Начинай с Milestone A и веди “DEVLOG.md” — по записи на каждый рабочий шаг (что сделал, что осталось, какие риски/долги).
